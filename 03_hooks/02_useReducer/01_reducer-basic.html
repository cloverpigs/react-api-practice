<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01_reducer-basic</title>

    <!-- 리액트 공식 사이트의 문서에 웹 사이트 React 추가하기 메뉴의 cdn을 복사해서 넣어준다. -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- babel 추가-->
    <script src='https://unpkg.com/@babel/standalone/babel.min.js'></script>

</head>
<body>
    
    <div id="root"></div>

    <script type="text/babel">

        /* useReducer는 다양한 컴포넌트의 state를 업데이트 할 때 사용하는 Hook
        리듀서 사용시 가장 큰 장점은 컴포넌트 업데이트 로직을 컴포넌트 밖으로
        분리할 수 있다는 점이다.
        리듀서는 새로운 상태를 만들 때 반드시 불변성을 지켜주어야 한다.
        (기존 state의 값을 변경하는 것이 아니라 새롭게 생성한다.)
        */

        const { useReducer } = React;
        
        /* 리듀서 함수는 첫번째 인자는 기존 상태 값, 
        두 번째 인자는 업데이트를 위해 필요한 정보를 담은 객체를 전달 받는다. */
        function reducer(state, action) {
            /* action에 전달 된 type에 따라 새로운 state를 갱신할 객체를 생성해서 
            리턴한다. (불변성 유지) */
            switch(action.type) {
                case 'INCREMENT' : // 증가 동작
                    return{ value : state.value + 1 };  
                case 'DECREMENT' : // 감소 동작
                    return{ value : state.value - 1 };
                default : // 아무 타입도 해당하지 않을 경우 기존 state 반환
                    return state
            }
        }

        function Counter(){

            /* useReducer의 첫 번째 인자는 리듀서 함수, 
            두 번째 인자는 해당 리듀서의 기본 값 
            state는 현재 상태이고 dispatcher는 액션을 발생시키는 함수이다.*/
            const [ state, dispatcher ] = useReducer(reducer, { value : 0 });
            

            return(
                <>
                    <h1>count : { state.value }</h1>
                    <button onClick={ () => dispatcher({type : 'DECREMENT'}) } >- 1</button>
                    <button onClick={ () => dispatcher({type : 'INCREMENT'}) } >+ 1</button>
                </>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<Counter/>);
    </script>

</body>
</html>